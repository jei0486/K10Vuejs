<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>21Http1-promise1.html</title>
<!-- JQuery CDN -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<!-- development version, includes helpful console warnings -->
<script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<!-- 
프로미스(Promise)
-비동기 처리를 순차적으로 실행할 필요가 있는 경우 기존의 Callback 을 중첩시켜 표현하므로
에러처리, 예외처리가 어렵다는 단점이 존재함
-기존 JS에서 사용하던 Callback 의 단점을 해결하기 위한 라이브러리
-프로미스의 3가지 상태(State)
    -Pending : 대기상태. 비동기 처리 로직이 완료되지않은 상태
    -Fullfilled : 이행상태. 비동기 처리가 완료되어 프로미스가 결과값을 반환해준 상태
    -Rejected : 비동기 처리가 실패하거나 오류가 발생한 상태

 -->
<script>
//프로미스 객체를 상수 형태로 선언 
const promise1 = function(param){
    //객체를 생성하면 Pending(대기)상태가 됨
    return new Promise(function(resolve,reject){
        if(param){
            //Fulfilled(이행) 상태일때 resolve() 함수 호출
            resolve("true이면 여기가 실행됨");
        }
        else{
            //Rejected(실패)상태일때 reject()함수 호출
            reject("true 가 아니면 여기가 실행됨 ");

        }
    });
}

var myFunc1 = function(){
    //프로미스 첫번째 호출
    promise1(true)
        //이행 상태가 되면 then()을 통해 처리 결과를 받을 수 있음
        .then(function(resData){
            console.log("호출1 : 성공시 then 영역 실행->",resData);
        })
        //실패 상태가 되면 catch() 부분이 실행되어 에러결과를 받을 수 있음
        .catch(function(errData){
            console.log("호출1 : 실패시 catch 영역 실행->",errData);
        });
}

var myFunc2 = function(){

    promise1(false)
        .then(function(resData){
            console.log("호출2 : 성공시 then 영역 실행->",resData);
        })
        .catch(function(errData){
            console.log("호출2 : 실패시 catch 영역 실행->",errData);
        });
}

 </script>
</head>
<body>

 <div id="app">
    <h2>Promise</h2>

    <button type="button" onclick="myFunc1();">프로미스 호출1</button>
    <button type="button" onclick="myFunc2();">프로미스 호출2</button>
 </div>

    
</body>
</html>